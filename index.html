<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Solix.cc | AI Assistant</title>
    <style>
        :root {
            --primary-color: #ffd100; --secondary-color: #f1f3f4; --bot-message-bg: #ffffff;
            --user-message-bg: #fff8e1; --font-color: #172b4d; --font-color-light: #6b778c;
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            --border-radius-lg: 16px; --border-radius-sm: 8px;
        }
        html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; font-family: var(--font-family); background-color: transparent; }
        #chatbot-container { width: 100%; height: 100%; background-color: var(--secondary-color); display: flex; flex-direction: column; overflow: hidden; }
        @media (min-width: 768px) {
            body { display: flex; justify-content: center; align-items: center; padding: 20px; box-sizing: border-box; }
            #chatbot-container { max-width: 480px; height: 85%; max-height: 750px; border-radius: var(--border-radius-lg); box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2); }
        }
        #chat-header { background-color: var(--primary-color); color: var(--font-color); padding: 16px 20px; display: flex; align-items: center; flex-shrink: 0; gap: 12px; }
        #header-avatar { width: 40px; height: 40px; border-radius: 50%; background-color: rgba(0, 0, 0, 0.1); display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 20px; }
        #chat-header h3 { margin: 0; font-size: 18px; font-weight: 600; }
        #chat-messages { flex-grow: 1; padding: 20px; overflow-y: auto; min-height: 0; }
        .message-wrapper { display: flex; margin-bottom: 20px; animation: fadeIn 0.4s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .bot-message-wrapper { justify-content: flex-start; }
        .user-message-wrapper { justify-content: flex-end; }
        .bot-avatar { width: 32px; height: 32px; border-radius: 50%; background-color: var(--primary-color); color: var(--font-color); display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 16px; margin-right: 12px; flex-shrink: 0; }
        .message-content { padding: 12px 16px; border-radius: var(--border-radius-lg); line-height: 1.5; word-wrap: break-word; max-width: 100%; }
        .message-container { display: flex; flex-direction: column; max-width: calc(100% - 44px); }
        .bot-message-wrapper .message-container { align-items: flex-start; }
        .user-message-wrapper .message-container { align-items: flex-end; max-width: 85%; }
        .bot-message-content { background-color: var(--bot-message-bg); color: var(--font-color); border-bottom-left-radius: var(--border-radius-sm); }
        .user-message-content { background-color: var(--user-message-bg); color: var(--font-color); border-bottom-right-radius: var(--border-radius-sm); }
        .message-time { font-size: 11px; color: var(--font-color-light); margin-top: 6px; padding: 0 5px; }
        .typing-indicator span { height: 8px; width: 8px; margin: 0 2px; background-color: #b0b8c8; border-radius: 50%; display: inline-block; animation: bounce 1.4s infinite ease-in-out both; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }
        #chat-input-container { border-top: 1px solid #dde1e6; padding: 15px 20px; background-color: white; flex-shrink: 0; }
        #chat-input-form { display: flex; align-items: center; }
        #user-input { flex-grow: 1; border: 1px solid #ccc; border-radius: 20px; padding: 10px 18px; font-size: 14px; margin-right: 10px; outline: none; transition: border-color 0.2s; }
        #send-btn { background-color: var(--primary-color); color: var(--font-color); border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 18px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s; flex-shrink: 0; }
        .suggestion-chips, .language-switcher { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; }
        .chip { background-color: #fff8e1; color: var(--font-color); padding: 6px 12px; border-radius: 16px; font-size: 13px; cursor: pointer; border: 1px solid transparent; transition: all 0.2s; }
        .lang-chip { background-color: transparent; color: var(--font-color-light); font-size: 12px; border: 1px solid #dde1e6; padding: 4px 10px; }
        .booking-link { color: #c7a100; font-weight: bold; text-decoration: underline; }
        .booking-link:hover { color: #997b00; }
        /* --- NEW STYLES FOR CONTACT FORM --- */
        .contact-form-container { background-color: #fff; padding: 16px; border-radius: var(--border-radius-lg); margin-top: 10px; border: 1px solid #dde1e6;}
        .contact-form-container label { font-size: 13px; font-weight: 600; margin-bottom: 6px; display: block; }
        .contact-form-container input, .contact-form-container textarea { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: var(--border-radius-sm); font-family: var(--font-family); font-size: 14px; box-sizing: border-box; margin-bottom: 12px; }
        .contact-form-container textarea { resize: vertical; min-height: 80px; }
        .form-submit-btn { background-color: var(--primary-color); color: var(--font-color); width: 100%; border: none; padding: 12px; font-size: 15px; font-weight: bold; border-radius: var(--border-radius-sm); cursor: pointer; transition: opacity 0.2s; }
        .form-submit-btn:hover { opacity: 0.9; }
    </style>
</head>
<body>
    <div id="chatbot-container">
        <div id="chat-header"><div id="header-avatar">S</div><h3 id="chat-title">Solix AI Assistant</h3></div>
        <div id="chat-messages"></div>
        <div id="chat-input-container">
            <form id="chat-input-form">
                <input type="text" id="user-input" autocomplete="off"><button type="submit" id="send-btn">&#10148;</button>
            </form>
        </div>
    </div>
    <script>
        window.addEventListener('load', () => {
            const chatInputForm = document.getElementById('chat-input-form');
            const userInput = document.getElementById('user-input');
            const chatMessages = document.getElementById('chat-messages');
            const chatTitle = document.getElementById('chat-title');

            let currentLanguage = navigator.language.startsWith('nl') ? 'nl' : 'en';

            const translations = {
                en: {
                    title: "Solix AI Assistant",
                    placeholder: "e.g., Tell me about your Scrum Master experience",
                    welcome: { text: `Hello! I'm the AI assistant for Coen Zweers. It's currently 5:23 PM in Amsterdam. I am trained on his CV and can answer specific questions about skills, projects, and services. How can I help?`, chips: ["What are your main services?", "Give me a project example", "Do you have Scrum Master experience?"], langSwitcher: { lang: 'nl', text: 'üá≥üá± Schakel over naar Nederlands' }},
                    formContent: {
                        intro: "Please fill out the form below. Clicking 'Send Email' will open your default email client with your message ready to send.",
                        nameLabel: "Name", emailLabel: "Email", requestLabel: "Your Request", buttonText: "‚úâÔ∏è Send Email"
                    },
                    intents: [
                        { id: 'contact', keywords: ['contact', 'book', 'call', 'introduction', 'schedule', 'meeting'], response: { text: `The best next step is to schedule a brief introductory call. You can book a time that works for you directly using this link:<br><br>üóìÔ∏è <a href="https://calendly.com/coenzweers-solix/introduction" target="_blank" rel="noopener noreferrer" class="booking-link">Book an Introduction Call</a>`, chips: ["What are the services?", "Thanks!"] }},
                        { id: 'request_form', keywords: ['yes, send a message', 'message form'], response: { form: true }},
                        // Other intents
                        { id: 'services_overview', keywords: ['service', 'offer', 'what you do', 'what do you do', 'capabilities', 'help with'], response: { text: `Coen focuses on two main areas: short-term Strategic & Transformation projects, and longer-term Interim Leadership roles. Which area is more relevant for you?`, chips: ["Strategy & Transformation", "Interim Leadership"] }},
                        { id: 'experience_scrum', keywords: ['scrum master', 'agile coach', 'psm', 'scrum', 'agile mindset', 'abn amro'], response: { text: `Yes, Coen has direct experience as an <strong>Agile Coach and Scrum Master at ABN AMRO</strong>. He coached three teams (25 members) to adopt a fully agile mindset and was responsible for the full Scrum framework. He is also a certified Professional Scrum Master (PSM II).`, chips: ["What about Product Owner roles?", "Book a Call"] }},
                        { id: 'experience_po', keywords: ['product owner', 'product manager', 'sunrock', 'rabobank', 'figma', 'jira', 'pspo'], response: { text: `Coen has extensive experience as a Product Owner and IT Product Manager. At <strong>Sunrock</strong>, he led the end-to-end creation of a customer portal and a digital design tool. He is skilled in managing backlogs in Jira, designing in Figma, and is a certified Professional Scrum Product Owner (PSPO II).`, chips: ["What about his work at elipsLife?", "Book a Call"] }},
                        { id: 'experience_elipslife', keywords: ['elipslife', 'interim leadership', 'erp', 'insurance'], response: { text: `At elipsLife, Coen served as interim <strong>Head of Business Services</strong>, a key leadership role. He led a team of seven and managed a major international ERP implementation which unified teams across four countries.`, chips: ["Tell me about Kramp", "Book a Call"] }},
                        { id: 'experience_kramp', keywords: ['kramp', 'pmo', 'transformation', 'strategic advice'], response: { text: `At Kramp, Coen was a <strong>Transformation Management Officer (PMO)</strong> for a large-scale Target Operating Model program. He tracked progress across 15 workstreams and helped implement new, more efficient ways of working across Europe.`, chips: ["What about his Scrum Master work?", "Book a Call"] }},
                        { id: 'thanks', keywords: ['thanks', 'thank you', 'ok', 'great'], response: { text: "You're welcome! If you have any other questions, feel free to ask.", chips: ["Services", "Scrum Master experience"] }}
                    ],
                    fallback: { text: "My apologies, I can't find a specific answer for that. I can help with questions about Coen's services, or I can open a form for you to send a direct message. What would you prefer?", chips: ["Yes, send a message", "Ask something else"] }
                },
                nl: {
                    title: "Solix AI Assistent",
                    placeholder: "bv. Vertel over je Scrum Master ervaring",
                    welcome: { text: `Hallo! Ik ben de AI-assistent van Coen Zweers. Het is momenteel 17:23 in Amsterdam. Ik kan specifieke vragen beantwoorden over zijn vaardigheden, projecten en diensten. Hoe kan ik helpen?`, chips: ["Wat zijn de hoofddiensten?", "Geef een projectvoorbeeld", "Heb je Scrum Master ervaring?"], langSwitcher: { lang: 'en', text: 'üá¨üáß Switch to English' }},
                    formContent: {
                        intro: "Vul alstublieft het onderstaande formulier in. Als u op 'Verstuur E-mail' klikt, wordt uw standaard e-mailprogramma geopend met uw bericht.",
                        nameLabel: "Naam", emailLabel: "E-mailadres", requestLabel: "Uw Vraag of Verzoek", buttonText: "‚úâÔ∏è Verstuur E-mail"
                    },
                    intents: [
                        { id: 'contact', keywords: ['contact', 'boek', 'boeken', 'gesprek', 'kennismaking', 'plannen', 'afspraak'], response: { text: `De beste volgende stap is een korte kennismaking. U kunt direct een geschikt moment inplannen via deze link:<br><br>üóìÔ∏è <a href="https://calendly.com/coenzweers-solix/introduction" target="_blank" rel="noopener noreferrer" class="booking-link">Plan een Kennismakingsgesprek</a>`, chips: ["Wat zijn de diensten?", "Bedankt!"] }},
                        { id: 'request_form', keywords: ['ja, stuur een bericht', 'bericht versturen'], response: { form: true }},
                        // Other intents
                        { id: 'services_overview', keywords: ['diensten', 'aanbod', 'wat doe je', 'helpen', 'mogelijkheden'], response: { text: `Coen focust op twee hoofdgebieden: Strategische & Transformatieprojecten (korte termijn), en Interim Leiderschapsrollen (lange termijn). Welk gebied is voor u het meest relevant?`, chips: ["Strategie & Transformatie", "Interim Leiderschap"] }},
                        { id: 'experience_scrum', keywords: ['scrum master', 'agile coach', 'psm', 'scrum', 'agile mindset', 'abn amro'], response: { text: `Jazeker, Coen heeft directe ervaring als <strong>Agile Coach en Scrum Master bij ABN AMRO</strong>. Hij coachte drie teams (25 leden) naar een volledig agile werkwijze en was verantwoordelijk voor het Scrum-framework. Hij is ook een gecertificeerd Professional Scrum Master (PSM II).`, chips: ["En als Product Owner?", "Plan een gesprek"] }},
                        { id: 'experience_po', keywords: ['product owner', 'product manager', 'sunrock', 'rabobank', 'figma', 'jira', 'pspo'], response: { text: `Coen heeft uitgebreide ervaring als Product Owner en IT Product Manager. Bij <strong>Sunrock</strong> leidde hij de volledige ontwikkeling van een klantenportaal en een digitale ontwerptool. Hij is bedreven in het beheren van backlogs in Jira, ontwerpen in Figma, en is een gecertificeerd Professional Scrum Product Owner (PSPO II).`, chips: ["Vertel over zijn werk bij elipsLife?", "Plan een gesprek"] }},
                        { id: 'experience_elipslife', keywords: ['elipslife', 'interim leiderschap', 'erp', 'verzekering'], response: { text: `Bij elipsLife was Coen interim <strong>Head of Business Services</strong>, een essenti√´le leiderschapsrol. Hij gaf leiding aan een team van zeven en was projectmanager voor een grote internationale ERP-implementatie.`, chips: ["Vertel over Kramp", "Plan een gesprek"] }},
                        { id: 'experience_kramp', keywords: ['kramp', 'pmo', 'transformatie', 'strategisch advies'], response: { text: `Bij Kramp was Coen een <strong>Transformation Management Officer (PMO)</strong> voor een grootschalig Target Operating Model-programma. Hij volgde de voortgang van 15 'workstreams' en hielp bij het implementeren van nieuwe, effici√´ntere werkwijzen in heel Europa.`, chips: ["En zijn Scrum Master werk?", "Plan een gesprek"] }},
                        { id: 'thanks', keywords: ['bedankt', 'dank', 'ok', 'geweldig'], response: { text: "Graag gedaan! Als u nog andere vragen heeft, stel ze gerust.", chips: ["Diensten", "Scrum Master ervaring"] }}
                    ],
                    fallback: { text: "Mijn excuses, ik kan geen specifiek antwoord vinden. Ik kan u helpen met vragen over de diensten van Coen, of ik kan een formulier openen zodat u een direct bericht kunt sturen. Wat heeft uw voorkeur?", chips: ["Ja, stuur een bericht", "Stel een andere vraag"] }
                }
            };
            
            function setLanguage(lang) {
                currentLanguage = lang;
                const T = translations[lang];
                chatTitle.textContent = T.title;
                userInput.placeholder = T.placeholder;
                chatMessages.innerHTML = '';
                appendMessage('bot', T.welcome);
            }

            function getBotResponse(userText) {
                const text = userText.toLowerCase();
                const T = translations[currentLanguage];
                for (const intent of T.intents) {
                    if (intent.keywords.some(keyword => text.includes(keyword))) return intent.response;
                }
                return T.fallback;
            }
            
            // --- UPDATED to handle 'form' response type ---
            function appendMessage(sender, response) {
                const { text, chips = [], form = false, langSwitcher = null } = response;
                const messageWrapper = document.createElement('div'); messageWrapper.className = `message-wrapper ${sender}-message-wrapper`;
                let avatarHtml = ''; if (sender === 'bot') { avatarHtml = '<div class="bot-avatar">S</div>'; }
                const messageContainer = document.createElement('div'); messageContainer.className = 'message-container';

                if (text) { const messageContent = document.createElement('div'); messageContent.className = `message-content ${sender}-message-content`; messageContent.innerHTML = text; messageContainer.appendChild(messageContent); }
                
                if (form) {
                    const T_form = translations[currentLanguage].formContent;
                    const formIntro = document.createElement('div');
                    formIntro.className = 'message-content bot-message-content';
                    formIntro.style.marginBottom = '10px';
                    formIntro.innerHTML = T_form.intro;
                    messageContainer.appendChild(formIntro);

                    const formContainer = document.createElement('div');
                    formContainer.className = 'contact-form-container';
                    formContainer.innerHTML = `
                        <form id="contact-form">
                            <label for="contact-name">${T_form.nameLabel}</label>
                            <input type="text" id="contact-name" name="name" required>
                            <label for="contact-email">${T_form.emailLabel}</label>
                            <input type="email" id="contact-email" name="email" required>
                            <label for="contact-request">${T_form.requestLabel}</label>
                            <textarea id="contact-request" name="request" required></textarea>
                            <button type="submit" class="form-submit-btn">${T_form.buttonText}</button>
                        </form>
                    `;
                    messageContainer.appendChild(formContainer);

                    formContainer.querySelector('#contact-form').addEventListener('submit', (e) => {
                        e.preventDefault();
                        const name = e.target.name.value;
                        const email = e.target.email.value;
                        const request = e.target.request.value;
                        const subject = `Inquiry from Solix.cc Chatbot - ${name}`;
                        const body = `Name: ${name}\nEmail: ${email}\n\nRequest:\n${request}`;
                        window.location.href = `mailto:coenzweers@solix.cc?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                    });
                }

                if (chips && chips.length > 0) {
                    const chipsContainer = document.createElement('div'); chipsContainer.className = 'suggestion-chips';
                    chips.forEach(chipText => {
                        const chip = document.createElement('div'); chip.className = 'chip'; chip.textContent = chipText;
                        chip.onclick = () => { chipsContainer.querySelectorAll('.chip').forEach(c => c.style.pointerEvents = 'none'); chip.style.backgroundColor = 'var(--primary-color)'; chip.style.color = 'var(--font-color)'; appendMessage('user', { text: chipText }); handleBotResponse(chipText); };
                        chipsContainer.appendChild(chip);
                    });
                    messageContainer.appendChild(chipsContainer);
                }
                if (langSwitcher) { const langContainer = document.createElement('div'); langContainer.className = 'language-switcher'; const langChip = document.createElement('div'); langChip.className = 'chip lang-chip'; langChip.textContent = langSwitcher.text; langChip.onclick = () => setLanguage(langSwitcher.lang); langContainer.appendChild(langChip); messageContainer.appendChild(langContainer); }
                const messageTime = document.createElement('div'); messageTime.className = 'message-time'; messageTime.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }); messageContainer.appendChild(messageTime);
                messageWrapper.innerHTML = avatarHtml; messageWrapper.appendChild(messageContainer);
                chatMessages.appendChild(messageWrapper); scrollToBottom();
            }

            chatInputForm.addEventListener('submit', (e) => { e.preventDefault(); const messageText = userInput.value.trim(); if (messageText) { appendMessage('user', { text: messageText }); userInput.value = ''; handleBotResponse(messageText); } });
            function handleBotResponse(userText) { showTypingIndicator(); setTimeout(() => { removeTypingIndicator(); const botResponse = getBotResponse(userText); appendMessage('bot', botResponse); }, 1200); }
            function showTypingIndicator() { const indicatorHtml = `<div class="message-wrapper bot-message-wrapper" id="typing-indicator"><div class="bot-avatar">S</div><div class="message-container"><div class="message-content bot-message-content"><div class="typing-indicator"><span></span><span></span><span></span></div></div></div></div>`; chatMessages.insertAdjacentHTML('beforeend', indicatorHtml); scrollToBottom(); }
            function removeTypingIndicator() { const indicator = document.getElementById('typing-indicator'); if (indicator) indicator.remove(); }
            function scrollToBottom() { chatMessages.scrollTop = chatMessages.scrollHeight; }

            setLanguage(currentLanguage);
        });
    </script>
</body>
</html>
