<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Solix.cc | AI Assistant</title>
  <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet" />
  <style>
    :root {
      --primary: #ffd100;
      --background: #f1f3f4;
      --bot-bg: #fff;
      --user-bg: #fff8e1;
      --text-main: #172b4d;
      --text-sub: #6b778c;
      --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      --radius-lg: 16px;
      --radius-sm: 8px;
      --shadow: 0 10px 40px rgba(0,0,0,0.15);
    }
    html,body {
      margin:0; padding:0;
      width: 100%;
      height: 100%;
      background: var(--background);
      font-family: var(--font-family);
      overscroll-behavior: none;
      overflow: hidden;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    #chatbot {
      position: fixed;
      right: 20px;
      bottom: 20px;
      width: 100%;
      max-width: 420px;
      height: 600px;
      max-height: 90vh;
      background: var(--background);
      box-shadow: var(--shadow);
      border-radius: var(--radius-lg);
      display: flex;
      flex-direction: column;
      z-index: 9999;
      overflow: hidden;
      font-size: 14px;
    }
    @media (max-width:480px) {
      #chatbot {
        bottom: 10px;
        right: 10px;
        width: 100vw;
        max-width: none;
        height: 80vh;
        border-radius: 0;
        box-shadow: none;
        font-size: 13px;
      }
    }
    #chat-header {
      background: var(--primary);
      color: var(--text-main);
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 14px 20px;
      user-select: none;
      flex-shrink: 0;
    }
    #chat-header-avatar {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: rgba(0,0,0,0.1);
      color: var(--text-main);
      font-weight: 700;
      font-size: 24px;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-shrink: 0;
    }
    #chat-title {
      font-weight: 700;
      font-size: 20px;
      margin: 0;
    }
    #chat-body {
      flex-grow: 1;
      overflow-y: auto;
      padding: 18px 20px;
      background: var(--background);
      scroll-behavior: smooth;
      overscroll-behavior: contain;
    }
    .message-wrapper {
      display: flex;
      margin-bottom: 18px;
      opacity: 0;
      transform: translateY(12px);
      animation: fadeInUp 0.3s ease forwards;
      -webkit-font-smoothing: antialiased;
    }
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .user-message {
      justify-content: flex-end;
    }
    .bot-message {
      justify-content: flex-start;
    }
    .bot-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--primary);
      color: var(--text-main);
      font-weight: 700;
      font-size: 18px;
      display: flex;
      justify-content: center;
      align-items: center;
      margin-right: 14px;
      flex-shrink: 0;
      user-select: none;
    }
    .message-container {
      max-width: 75%;
      display: flex;
      flex-direction: column;
    }
    .bot-message .message-container {
      align-items: flex-start;
    }
    .user-message .message-container {
      align-items: flex-end;
    }
    .message-text {
      padding: 12px 18px;
      border-radius: var(--radius-lg);
      line-height: 1.4;
      word-break: break-word;
      white-space: pre-wrap;
      box-shadow: 0 1px 2px rgba(0, 0, 0, 0.05);
      user-select: text;
    }
    .bot-text {
      background: var(--bot-bg);
      color: var(--text-main);
      border-bottom-left-radius: var(--radius-sm);
      border-top-left-radius: var(--radius-lg);
      border-top-right-radius: var(--radius-lg);
    }
    .user-text {
      background: var(--user-bg);
      color: var(--text-main);
      border-bottom-right-radius: var(--radius-sm);
      border-top-left-radius: var(--radius-lg);
      border-top-right-radius: var(--radius-lg);
      font-weight: 600;
    }
    .timestamp {
      margin-top: 6px;
      font-size: 11px;
      color: var(--text-sub);
      padding: 0 8px;
      user-select: none;
      white-space: nowrap;
    }
    .suggestions {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .chip {
      background: var(--user-bg);
      border: none;
      padding: 6px 14px;
      border-radius: 20px;
      font-weight: 600;
      user-select: none;
      cursor: pointer;
      color: var(--text-main);
      box-shadow: 0 1px 4px rgb(0 0 0 / 0.05);
      white-space: nowrap;
      transition: background-color 0.3s, box-shadow 0.3s;
    }
    .chip:hover {
      background: var(--primary);
      box-shadow: 0 2px 5px rgb(0 0 0 / 0.12);
    }
    .chip:disabled {
      opacity: 0.5;
      cursor: not-allowed;
      box-shadow: none;
    }
    .language-switcher {
      margin-top: 12px;
      display: flex;
      justify-content: center;
      gap: 12px;
    }
    .lang-chip {
      background: transparent;
      border: 1px solid var(--text-sub);
      border-radius: 20px;
      padding: 4px 12px;
      font-size: 12px;
      color: var(--text-sub);
      cursor: pointer;
      user-select: none;
      transition: all 0.2s ease;
    }
    .lang-chip:hover {
      color: var(--text-main);
      border-color: var(--text-main);
      background: var(--bot-bg);
    }
    #input-area {
      border-top: 1px solid #dde1e6;
      background: #fff;
      padding: 14px 20px;
      flex-shrink: 0;
    }
    #input-area form {
      display: flex;
      gap: 12px;
    }
    #user-input {
      flex-grow: 1;
      font-family: var(--font-family);
      font-size: 14px;
      padding: 12px 18px;
      border-radius: 20px;
      border: 1px solid #ccc;
      color: var(--text-main);
      outline: none;
      transition: border-color 0.25s, box-shadow 0.25s;
    }
    #user-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 8px rgba(255 209 0 / 0.6);
    }
    #user-input::placeholder {
      color: var(--text-sub);
      font-weight: 400;
    }
    #send-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      font-size: 20px;
      font-weight: 700;
      background: var(--primary);
      color: var(--text-main);
      border: none;
      cursor: pointer;
      display: flex;
      justify-content: center;
      align-items: center;
      user-select: none;
      transition: background-color 0.2s;
    }
    #send-btn:hover:not(:disabled) {
      background: #d4b300;
    }
    #send-btn:disabled {
      cursor: not-allowed;
      background: #ccc;
      color: #888;
    }
    .typing-indicator {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 2px 8px;
    }
    .typing-dot {
      width: 10px;
      height: 10px;
      background: var(--text-sub);
      border-radius: 50%;
      animation: bounce 1.4s infinite ease-in-out;
    }
    .typing-dot:nth-child(1) {
      animation-delay: 0;
    }
    .typing-dot:nth-child(2) {
      animation-delay: 0.2s;
    }
    .typing-dot:nth-child(3) {
      animation-delay: 0.4s;
    }
    @keyframes bounce {
      0%, 80%, 100% {
        transform: scale(0);
      }
      40% {
        transform: scale(1);
      }
    }
    a.contact-link {
      color: var(--primary);
      text-decoration: underline;
    }
    a.contact-link:hover {
      color: #d4b300;
    }
    a.calendly-link {
      display: inline-block;
      margin-top: 8px;
      padding: 6px 14px;
      background: var(--primary);
      color: var(--text-main);
      font-weight: 600;
      text-decoration: none;
      border-radius: var(--radius-sm);
      user-select: none;
      transition: background-color 0.2s;
    }
    a.calendly-link:hover {
      background-color: #d4b300;
    }
  </style>
</head>
<body>
  <div id="chatbot" role="region" aria-label="Solix AI Assistant chatbot">
    <header id="chat-header">
      <div id="chat-header-avatar" aria-hidden="true">S</div>
      <h1 id="chat-title">Solix AI Assistant</h1>
    </header>
    <main id="chat-body" aria-live="polite" aria-atomic="false"></main>
    <section id="input-area">
      <form id="input-form" aria-label="Chat input form">
        <input id="user-input" type="text" aria-label="Type your message" placeholder="Ask about Coen's expertise or services..." autocomplete="off" required />
        <button type="submit" id="send-btn" aria-label="Send message" disabled>âž¤</button>
      </form>
    </section>
  </div>
  <script src="https://assets.calendly.com/assets/external/widget.js" async></script>
  <script>
    (function(){
      const translations = {
        en:{
          title: "Solix AI Assistant",
          placeholder: "Ask about Coen's expertise or services...",
          welcome: {
            text: `Hello! I'm Coen Zweers' AI assistant. I can answer questions about his expertise, experience, and service offerings. How can I help you today?`,
            chips: [
              "Tell me about Coen's services",
              "Tell me about Coen's Product Owner experience",
              "Tell me about Coen's agile and Scrum experience",
              "Tell me about Coen's projects",
              "Book a call",
              "Contact Coen"
            ],
            langSwitcher: { lang: "nl", text: "ðŸ‡³ðŸ‡± Switch to Dutch" }
          },
          intents: [
            {
              id:"services",
              keywords: ["service", "services", "offering", "what do you do", "help"],
              response:{
                text:`Coen Zweers is a versatile freelance consultant offering:<br>
                - Strategic consulting in renewable energy, finance and technology<br>
                - Interim management roles (e.g., Head of Operations/Innovation)<br>
                - Change management and agile transformation<br>
                - Workshop facilitation on agile & project management<br>
                More details on specific requests available. How can I help?`
              },
              chips:["Tell me about Coen's Product Owner experience","Book a call"]
            },
            {
              id:"product_owner",
              keywords:["product owner","product manager","po","product","jira","figma"],
              response:{
                text:`Coen has led product management and ownership roles at Sunrock and Rabobank.<br>
                He successfully led development of digital customer portals and design tools, managing backlog with Jira, product design with Figma.<br>
                Certified as Professional Scrum Product Owner (PSPO II).`
              },
              chips:["Tell me about Coen's agile experience","Book a call"]
            },
            {
              id:"agile",
              keywords:["scrum master","agile","scrum","coach","psm"],
              response:{
                text:`Coen worked as Agile Coach and Scrum Master at ABN AMRO.<br>
                He successfully coached teams, implemented Scrum frameworks, and guided agile practices.<br>
                He holds certifications PSM II and SAFe Agilist.`
              },
              chips:["Tell me about Coen's Product Owner experience","Book a call"]
            },
            {
              id:"projects",
              keywords:["project","portfolio","elipslife","sunrock","kramp","ing","rabobank","accenture"],
              response:{
                text:`Coen's key projects include:<ul>
                <li>Leading ERP implementation at elipslife across multiple countries</li>
                <li>Developing innovative solar energy digital solutions at Sunrock</li>
                <li>Managing transformation program PMO at Kramp</li>
                <li>Implementing AI monitoring and automation in Rabobank and Accenture</li>
                </ul>`
              },
              chips:["Book a call","Contact Coen"]
            },
            {
              id:"contact",
              keywords:["contact","talk","call","appointment","book","schedule","meet"],
              response:{
                text:`You can schedule a meeting with Coen via this link:<br>
                <a href="https://calendly.com/coenzers-solix/introduction" target="_blank" rel="noopener noreferrer" class="calendly-link" aria-label="Book a call with Coen">Book a call</a><br>
                Or email him directly at <a href="mailto:coenzers@solix.cc" class="contact-link">coenzers@solix.cc</a>.`
              },
              chips:[]
            },
            {
              id:"thanks",
              keywords:["thanks","thank you","ty","thx","great"],
              response:{
                text:`You're welcome! Let me know if I can help further or schedule a call.`
              },
              chips:["Tell me about Coen's services","Book a call"]
            }
          ],
          fallback:{
            generic:{
              text:`Iâ€™m sorry, I donâ€™t have the answer to that. You can book a meeting with Coen here:<br>
              <a href="https://calendly.com/coenzers-solix/introduction" target="_blank" rel="noopener noreferrer" class="calendly-link">Book a call</a><br>
              Or email at <a href="mailto:coenzers@solix.cc" class="contact-link">coenzers@solix.cc</a>.`
            },
            topicRedirects:[
              {topics:["service","help","offering"],intentId:"services"},
              {topics:["product owner","po","product manager"],intentId:"product_owner"},
              {topics:["scrum","agile","coach"],intentId:"agile"},
              {topics:["project","portfolio","elipslife","sunrock","kramp","rabobank","accenture"],intentId:"projects"},
              {topics:["contact","call","meet","book"],intentId:"contact"}
            ]
          }
        },
        nl:{
          title:"Solix AI Assistent",
          placeholder:"Vraag iets over Coen's expertise of diensten...",
          welcome:{
            text:`Hallo! Ik ben de AI-assistent van Coen Zweers. Ik kan vragen beantwoorden over zijn expertise, ervaring en diensten. Waarmee kan ik u helpen?`,
            chips:[
              "Vertel mij over Coen's diensten",
              "Vertel over Coen's ervaring als Product Owner",
              "Vertel over Coen's agile en Scrum ervaring",
              "Vertel over Coen's projecten",
              "Plan een gesprek",
              "Neem contact op met Coen"
            ],
            langSwitcher:{lang:"en",text:"ðŸ‡¬ðŸ‡§ Switch to English"}
          },
          intents:[
            {
              id:"services",
              keywords:["dienst","diensten","aanbod","wat doe je","hulp"],
              response:{
                text:`Coen Zweers is een veelzijdige freelance consultant die aanbiedt:<br>
                - Strategisch advies in hernieuwbare energie, financiÃ«n en technologie<br>
                - Interim management (bv. Hoofd Operaties/Innovatie)<br>
                - Verandermanagement en agile transformaties<br>
                - Workshops agile & projectmanagement<br>
                Voor meer info, vraag maar!`
              },
              chips:["Vertel over Coen's ervaring als Product Owner","Plan een gesprek"]
            },
            {
              id:"product_owner",
              keywords:["product owner","productmanager","po","product"],
              response:{
                text:`Coen heeft uitgebreide ervaring als Product Owner bij Sunrock en Rabobank.<br>
                Hij leidde digitale klantportalen, design tools en beheerde backlog met Jira en ontwerpen met Figma.<br>
                Hij is gecertificeerd PSPO II.`
              },
              chips:["Vertel over Coen's agile ervaring","Plan een gesprek"]
            },
            {
              id:"agile",
              keywords:["scrum","agile","coach","scrum master","psm"],
              response:{
                text:`Coen was Agile Coach en Scrum Master bij ABN AMRO.<br>
                Hij coacht teams, implementeert Scrum en heeft de certificaten PSM II en SAFe Agilist.`
              },
              chips:["Vertel over Coen's ervaring als Product Owner","Plan een gesprek"]
            },
            {
              id:"projects",
              keywords:["project","portfolio","elipslife","sunrock","kramp","rabobank","accenture"],
              response:{
                text:`Belangrijke projecten:<ul>
                <li>ERP-implementatie bij elipslife (>4 landen)</li>
                <li>Digitale oplossingen voor zonne-energie bij Sunrock</li>
                <li>PMO rol in transformatieprogramma bij Kramp</li>
                <li>Automatisering en AI monitoring bij Rabobank en Accenture</li>
                </ul>`
              },
              chips:["Plan een gesprek","Neem contact op met Coen"]
            },
            {
              id:"contact",
              keywords:["contact","afspraak","call","plan","boek","gesprek"],
              response:{
                text:`Plan een gesprek met Coen via:<br>
                <a href="https://calendly.com/coenzers-solix/introduction" target="_blank" rel="noopener noreferrer" class="calendly-link">Plan een gesprek</a><br>
                Of neem direct contact op via <a href="mailto:coenzers@solix.cc" class="contact-link">coenzers@solix.cc</a>.`
              },
              chips:[]
            },
            {
              id:"thanks",
              keywords:["dank","bedankt","super","top"],
              response:{
                text:`Graag gedaan! Ik help graag verder of plan een gesprek.`
              },
              chips:["Vertel over Coen's diensten","Plan een gesprek"]
            }
          ],
          fallback:{
            generic:{
              text:`Sorry, ik weet het antwoord niet. Plan een gesprek via:<br>
              <a href="https://calendly.com/coenzers-solix/introduction" target="_blank" rel="noopener noreferrer" class="calendly-link">Plan een gesprek</a><br>
              Of mail Coen via <a href="mailto:coenzers@solix.cc" class="contact-link">coenzers@solix.cc</a>.`
            },
            topicRedirects:[
              {topics:["dienst","hulp","aanbod"],intentId:"services"},
              {topics:["product owner","po"],intentId:"product_owner"},
              {topics:["scrum","agile","coach"],intentId:"agile"},
              {topics:["project","elipslife","sunrock","kramp","rabobank","accenture"],intentId:"projects"},
              {topics:["contact","gesprek","plan"],intentId:"contact"}
            ]
          }
        }
      };

      const chatBody = document.getElementById("chat-body");
      const chatForm = document.getElementById("input-form");
      const userInput = document.getElementById("user-input");
      const chatTitle = document.getElementById("chat-title");

      let currentLanguage = navigator.language.startsWith("nl") ? "nl" : "en";

      function escapeHTML(text) {
        return text.replace(/[&<>"']/g, c => ({ "&": "&amp;", "<": "&lt;", ">": "&gt;", '"': "&quot;", "'": "&#39;" })[c]);
      }

      function setLanguage(lang) {
        currentLanguage = lang;
        const T = translations[lang];
        chatTitle.textContent = T.title;
        userInput.placeholder = T.placeholder;
        chatBody.innerHTML = "";
        appendBotMessage(T.welcome);
      }

      function matchIntent(text) {
        const lc = text.toLowerCase();
        const T = translations[currentLanguage];
        for (const intent of T.intents) {
          for (const keyword of intent.keywords) {
            if (lc.includes(keyword)) return intent;
          }
        }
        for (const redirect of T.fallback.topicRedirects) {
          for (const topic of redirect.topics) {
            if (lc.includes(topic)) return T.intents.find(i => i.id === redirect.intentId);
          }
        }
        return null;
      }

      function getResponseObject(text) {
        const intent = matchIntent(text);
        const T = translations[currentLanguage];
        if (intent) {
          return { ...intent.response, chips: intent.chips || [] };
        }
        return T.fallback.generic;
      }

      function appendBotMessage(msg) {
        appendMessage("bot", msg);
      }

      function appendUserMessage(text) {
        appendMessage("user", { text });
      }

      function appendMessage(sender, message) {
        const wrapper = document.createElement("div");
        wrapper.className = `message-wrapper ${sender === "bot" ? "bot-message" : "user-message"}`;

        const avatar = sender === "bot" ? `<div class="bot-avatar" aria-hidden="true">S</div>` : "";
        const container = document.createElement("div");
        container.className = "message-container";

        if (message.text) {
          const el = document.createElement("div");
          el.className = `message-text ${sender === "bot" ? "bot-text" : "user-text"}`;
          el.innerHTML = message.text;
          container.appendChild(el);
        }
        if (message.html) {
          const htmlEl = document.createElement("div");
          htmlEl.innerHTML = message.html;
          container.appendChild(htmlEl);
        }
        if (message.chips?.length) {
          const chipsDiv = document.createElement("div");
          chipsDiv.className = "suggestions";
          message.chips.forEach(chipText => {
            const btn = document.createElement("button");
            btn.type = "button";
            btn.className = "chip";
            btn.textContent = chipText;
            btn.onclick = () => {
              disableChips(chipsDiv);
              appendUserMessage(escapeHTML(chipText));
              if (/email|mail/i.test(chipText)) {
                appendBotMessage(currentLanguage === "nl" ? 
                  `Je kunt Coen bereiken via <a href="mailto:coenzers@solix.cc" class="contact-link">coenzers@solix.cc</a>.` :
                  `You can email Coen at <a href="mailto:coenzers@solix.cc" class="contact-link">coenzers@solix.cc</a>.`);
              } else if (/book|plan/i.test(chipText)) {
                appendBotMessage(currentLanguage === "nl" ?
                  `Plan een gesprek via deze link:<br><a href="https://calendly.com/coenzers-solix/introduction" target="_blank" rel="noopener noreferrer" class="calendly-link">Plan een gesprek</a>.` :
                  `Schedule a call via this link:<br><a href="https://calendly.com/coenzers-solix/introduction" target="_blank" rel="noopener noreferrer" class="calendly-link">Book a call</a>.`);
              } else {
                handleUserInput(chipText);
              }
            };
            chipsDiv.appendChild(btn);
          });
          container.appendChild(chipsDiv);
        }
        if (message.langSwitcher) {
          const langDiv = document.createElement("div");
          langDiv.className = "language-switcher";
          const langBtn = document.createElement("button");
          langBtn.className = "lang-chip";
          langBtn.type = "button";
          langBtn.textContent = message.langSwitcher.text;
          langBtn.onclick = () => setLanguage(message.langSwitcher.lang);
          langDiv.appendChild(langBtn);
          container.appendChild(langDiv);
        }
        const timeEl = document.createElement("time");
        timeEl.className = "timestamp";
        timeEl.setAttribute("datetime", new Date().toISOString());
        timeEl.textContent = new Date().toLocaleTimeString([], {hour:"2-digit", minute:"2-digit"});
        container.appendChild(timeEl);

        wrapper.innerHTML = avatar;
        wrapper.appendChild(container);
        chatBody.appendChild(wrapper);
        chatBody.scrollTop = chatBody.scrollHeight;
      }

      function disableChips(container) {
        Array.from(container.children).forEach(c => {
          if(c.tagName === "BUTTON"){
            c.disabled = true;
            c.style.cursor = "default";
            c.style.opacity = "0.5";
          }
        });
      }

      function showTyping() {
        const typingHTML = `<div class="message-wrapper bot-message" id="typing-indicator">
          <div class="bot-avatar" aria-hidden="true">S</div>
          <div class="message-container">
            <div class="message-text bot-text" aria-label="Assistant is typing">
              <div class="typing-indicator">
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
                <span class="typing-dot"></span>
              </div>
            </div>
          </div>
        </div>`;
        chatBody.insertAdjacentHTML("beforeend", typingHTML);
        chatBody.scrollTop = chatBody.scrollHeight;
      }

      function removeTyping() {
        const typingNode = document.getElementById("typing-indicator");
        if(typingNode) typingNode.remove();
      }

      function handleUserInput(text) {
        showTyping();
        setTimeout(() => {
          removeTyping();
          const response = getResponseObject(text);
          appendBotMessage(response);
        }, 1200);
      }

      chatForm.onsubmit = e => {
        e.preventDefault();
        const val = userInput.value.trim();
        if(!val) return;
        appendUserMessage(escapeHTML(val));
        userInput.value = "";
        handleUserInput(val);
      };

      setLanguage(currentLanguage);
      window.onload = () => userInput.focus();
    })();
  </script>
</body>
</html>
