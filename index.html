<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
  <title>Solix.cc | AI Assistant</title>
  <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet" />
  <style>
    :root {
      --primary-color: #ffd100;
      --secondary-color: #f1f3f4;
      --bot-message-bg: #ffffff;
      --user-message-bg: #fff8e1;
      --font-color: #172b4d;
      --font-color-light: #6b778c;
      --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      --border-radius-lg: 16px;
      --border-radius-sm: 8px;
      --shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
    }
    html, body {
      margin: 0; padding: 0; width: 100%; height: 100%; background: var(--secondary-color);
      font-family: var(--font-family); -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
      overscroll-behavior: none;
      overflow: hidden;
    }
    #chatbot-container {
      position: fixed;
      right: 20px;
      bottom: 20px;
      width: 100%;
      max-width: 420px;
      height: 600px;
      max-height: 90vh;
      background: var(--secondary-color);
      box-shadow: var(--shadow);
      border-radius: var(--border-radius-lg);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      font-size: 14px;
      z-index: 9999;
    }
    @media (max-width: 480px) {
      #chatbot-container {
        right: 10px;
        bottom: 10px;
        height: 80vh;
        max-width: 100vw;
        width: 100vw;
        border-radius: 0;
        box-shadow: none;
        font-size: 13px;
      }
    }
    #chat-header {
      background: var(--primary-color);
      color: var(--font-color);
      display: flex;
      align-items: center;
      padding: 14px 20px;
      gap: 12px;
      flex-shrink: 0;
      user-select: none;
    }
    #header-avatar {
      background: rgba(0,0,0,0.1);
      width: 44px; height: 44px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 24px;
      color: var(--font-color);
      flex-shrink: 0;
    }
    #chat-title {
      margin: 0;
      font-weight: 700;
      font-size: 20px;
      user-select: none;
    }
    #chat-messages {
      flex-grow: 1;
      overflow-y: auto;
      padding: 18px 20px;
      scroll-behavior: smooth;
      overscroll-behavior: contain;
      background: var(--secondary-color);
    }
    .message-wrapper {
      display: flex;
      margin-bottom: 18px;
      animation: fadeInUp 0.3s ease forwards;
      opacity: 0;
      transform: translateY(12px);
      -webkit-font-smoothing: antialiased;
    }
    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    .bot-message-wrapper {
      justify-content: flex-start;
    }
    .user-message-wrapper {
      justify-content: flex-end;
    }
    .bot-avatar {
      width: 36px; height: 36px;
      border-radius: 50%;
      background: var(--primary-color);
      color: var(--font-color);
      font-weight: 700;
      font-size: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 14px;
      flex-shrink: 0;
      user-select: none;
    }
    .message-container {
      max-width: 75%;
      display: flex;
      flex-direction: column;
    }
    .bot-message-wrapper .message-container {
      align-items: flex-start;
    }
    .user-message-wrapper .message-container {
      align-items: flex-end;
    }
    .message-content {
      padding: 12px 18px;
      border-radius: var(--border-radius-lg);
      line-height: 1.4;
      word-wrap: break-word;
      white-space: pre-wrap;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
      user-select: text;
      font-weight: 500;
    }
    .bot-message-content {
      background: var(--bot-message-bg);
      color: var(--font-color);
      border-bottom-left-radius: var(--border-radius-sm);
      border-top-left-radius: var(--border-radius-lg);
      border-top-right-radius: var(--border-radius-lg);
    }
    .user-message-content {
      background: var(--user-message-bg);
      color: var(--font-color);
      border-bottom-right-radius: var(--border-radius-sm);
      border-top-left-radius: var(--border-radius-lg);
      border-top-right-radius: var(--border-radius-lg);
      font-weight: 600;
    }
    .message-time {
      margin-top: 6px;
      font-size: 11px;
      color: var(--font-color-light);
      padding: 0 8px;
      user-select: none;
      white-space: nowrap;
    }
    .suggestion-chips {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .chip {
      background: #fff8e1;
      color: var(--font-color);
      border-radius: 16px;
      cursor: pointer;
      font-size: 13px;
      padding: 6px 14px;
      user-select: none;
      border: 1px solid transparent;
      transition: background-color 0.2s, border-color 0.2s;
      box-shadow: 0 0 3px rgb(0 0 0 / 0.05);
      font-weight: 600;
      white-space: nowrap;
    }
    .chip:hover {
      background-color: #ffe553;
      border-color: var(--primary-color);
    }
    .chip:active {
      background-color: #e6b800;
      border-color: #c59e00;
    }
    .chip:disabled {
      background-color: #ddd;
      cursor: not-allowed;
      border-color: #ccc;
      color: #999;
    }
    .language-switcher {
      margin-top: 14px;
      display: flex;
      justify-content: center;
      gap: 12px;
    }
    .lang-chip {
      background: transparent;
      border: 1px solid #dde1e6;
      color: var(--font-color-light);
      padding: 5px 14px;
      font-size: 12px;
      border-radius: 20px;
      cursor: pointer;
      user-select: none;
      transition: background-color 0.15s, color 0.15s, border-color 0.15s;
    }
    .lang-chip:hover {
      background-color: #e9ecef;
      border-color: #b0b8c8;
      color: var(--font-color);
    }
    #chat-input-container {
      flex-shrink: 0;
      border-top: 1px solid #dde1e6;
      background: #fff;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    #chat-input-form {
      flex: 1;
      display: flex;
      align-items: center;
    }
    #user-input {
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 20px;
      padding: 11px 18px;
      font-size: 14px;
      outline: none;
      transition: border-color 0.25s;
      font-family: var(--font-family);
      color: var(--font-color);
      user-select: text;
    }
    #user-input::placeholder {
      color: var(--font-color-light);
      font-weight: 400;
    }
    #user-input:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 4px #ffd100aa;
    }
    #send-btn {
      background: var(--primary-color);
      border: none;
      border-radius: 50%;
      width: 42px;
      height: 42px;
      cursor: pointer;
      font-weight: 700;
      font-size: 18px;
      color: var(--font-color);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.25s;
    }
    #send-btn:hover:not(:disabled) {
      background-color: #e6b800;
    }
    #send-btn:disabled {
      background-color: #ddd;
      cursor: not-allowed;
      color: #999;
    }
    .typing-indicator span {
      display: inline-block;
      width: 10px;
      height: 10px;
      margin: 0 4px;
      background-color: #b0b8c8;
      border-radius: 50%;
      animation: bounce 1.4s infinite ease-in-out both;
    }
    .typing-indicator span:nth-child(1) {
      animation-delay: -0.32s;
    }
    .typing-indicator span:nth-child(2) {
      animation-delay: -0.16s;
    }
    .typing-indicator span:nth-child(3) {
      animation-delay: 0;
    }
    @keyframes bounce {
      0%, 80%, 100% {
        transform: scale(0);
      }
      40% {
        transform: scale(1.0);
      }
    }
    a.contact-email {
      color: var(--primary-color);
      text-decoration: underline;
    }
    a.contact-email:hover {
      color: #e6b800;
    }
    a.calendly-link {
      display: inline-block;
      margin-top: 8px;
      padding: 6px 12px;
      background: var(--primary-color);
      color: var(--font-color);
      border-radius: var(--border-radius-sm);
      font-weight: 600;
      text-decoration: none;
      user-select: none;
      transition: background-color 0.2s;
    }
    a.calendly-link:hover {
      background-color: #e6b800;
      color: var(--font-color);
    }
  </style>
</head>

<body>
  <div id="chatbot-container" role="region" aria-label="Chatbot assistant">
    <header id="chat-header">
      <div id="header-avatar" aria-hidden="true">S</div>
      <h1 id="chat-title">Solix AI Assistant</h1>
    </header>
    <main id="chat-messages" aria-live="polite" aria-relevant="additions"></main>
    <footer id="chat-input-container">
      <form id="chat-input-form" autocomplete="off" aria-label="Send message to chatbot">
        <input
          id="user-input"
          type="text"
          name="user-input"
          aria-label="Type your message here"
          autocomplete="off"
          placeholder="e.g., Tell me about your Product Owner knowledge"
          required
        />
        <button type="submit" id="send-btn" aria-label="Send message">âž¤</button>
      </form>
    </footer>
  </div>

  <script src="https://assets.calendly.com/assets/external/widget.js" async></script>
  <script>
    (function () {
      const translations = {
        en: {
          title: "Solix AI Assistant",
          placeholder: "e.g., Tell me about your Product Owner knowledge",
          welcome: {
            text: `Hello! I'm the AI assistant for Coen Zweers. I have been trained on his CV and can answer specific questions about his skills, projects, and services. How can I help?`,
            chips: ["What are your main services?", "Tell me about a specific project", "Do you have Product Owner experience?"],
            langSwitcher: { lang: 'nl', text: 'ðŸ‡³ðŸ‡± Schakel over naar Nederlands' }
          },
          intents: [
            {
              id: 'services_overview',
              keywords: ['service', 'offer', 'what you do', 'what do you do', 'capabilities', 'help with'],
              response: {
                text: `Coen provides support across several key areas. To give you the most relevant information, are you looking for short-term strategic advice or a longer-term interim leadership role?`
              },
              chips: ["Strategic Advice", "Interim Leadership"]
            },
            {
              id: 'experience_po',
              keywords: ['product owner', 'product manager', 'sunrock', 'rabobank', 'figma', 'jira', 'pspo'],
              response: {
                text: `Coen has extensive experience as a Product Owner and IT Product Manager. At <strong>Sunrock</strong>, he led the end-to-end creation of a customer portal and a digital design tool for PV systems. He is skilled in managing backlogs in Jira, designing in Figma, and is a certified Professional Scrum Product Owner (PSPO II).`
              },
              chips: ["Tell me about his technical skills"]
            },
            {
              id: 'experience_scrum',
              keywords: ['scrum master', 'agile coach', 'psm', 'scrum', 'agile mindset', 'abn amro'],
              response: {
                text: `Yes, Coen has direct experience as an <strong>Agile Coach and Scrum Master at ABN AMRO</strong>. He coached three teams (25 members) to adopt a fully agile mindset and was responsible for the full Scrum framework.`
              },
              chips: ["What about Product Owner roles?"]
            },
            {
              id: 'experience_elipslife',
              keywords: ['elipslife', 'interim leadership', 'erp', 'insurance'],
              response: {
                text: `At elipsLife, Coen served as interim <strong>Head of Business Services</strong>. He led a team of seven and managed a major international ERP implementation, which went live successfully. This project unified teams across four countries and migrated the entire insurance portfolio for the Netherlands.`
              },
              chips: ["What about his work at Kramp?"]
            },
            {
              id: 'experience_kramp',
              keywords: ['kramp', 'pmo', 'transformation'],
              response: {
                text: `At Kramp, Coen was a <strong>Transformation Management Officer (PMO)</strong> for a major Target Operating Model program. He was responsible for project management, tracking progress across 15 workstreams, and implementing new, more efficient ways of working across Europe.`
              },
              chips: ["What other experience does he have?"]
            },
            {
              id: 'contact',
              keywords: ['contact', 'book', 'call', 'introduction', 'schedule', 'meeting', 'appointment'],
              response: {
                text: `The best next step is to schedule a brief introductory call with Coen. You can do that by clicking the link below:<br><a href="https://calendly.com/coenzweers-solix/introduction" target="_blank" rel="noopener noreferrer" class="calendly-link" aria-label="Book a call with Coen on Calendly">Book a Call</a><br> Or you can email directly at <a href="mailto:coenzweers@solix.cc" class="contact-email">coenzweers@solix.cc</a>.`
              },
              chips: ["Send Email"]
            },
            {
              id: 'thanks',
              keywords: ['thanks', 'thank you', 'ok', 'great'],
              response: {
                text: "You're welcome! If you have any other questions, feel free to ask. Otherwise, booking a call is the best way to connect."
              },
              chips: ["Services", "Product Owner experience"]
            }
          ],
          fallback: {
            generic: {
              text: `I'm sorry, I don't have an answer to that. Please consider <a href="https://calendly.com/coenzweers-solix/introduction" target="_blank" rel="noopener noreferrer" class="calendly-link" aria-label="Book a call with Coen on Calendly">booking a call</a> to speak directly with Coen, or you can <a href="mailto:coenzweers@solix.cc" class="contact-email">email him</a> to get in touch quickly.`
            },
            topicRedirects: [
              { topics: ['service', 'offer', 'capability', 'help'], intentId: 'services_overview' },
              { topics: ['experience', 'work', 'history', 'project', 'case', 'cv'], intentId: 'experience_elipslife' },
              { topics: ['scrum', 'agile'], intentId: 'experience_scrum' },
              { topics: ['contact', 'book', 'call', 'schedule', 'appointment'], intentId: 'contact' }
            ]
          }
        },
        nl: {
          title: "Solix AI Assistent",
          placeholder: "bv. Vertel over je Product Owner ervaring",
          welcome: {
            text: `Hallo! Ik ben de AI assistent van Coen Zweers. Ik ben getraind op basis van zijn CV en kan specifieke vragen beantwoorden over zijn vaardigheden, projecten en diensten. Hoe kan ik helpen?`,
            chips: ["Wat zijn de hoofddiensten?", "Vertel over een specifiek project", "Heb je Product Owner ervaring?"],
            langSwitcher: { lang: 'en', text: 'ðŸ‡¬ðŸ‡§ Switch to English' }
          },
          intents: [
            {
              id: 'services_overview',
              keywords: ['diensten', 'aanbod', 'wat doe je', 'helpen', 'mogelijkheden'],
              response: {
                text: `Coen ondersteunt op diverse kergebieden. Om u de beste informatie te geven, zoekt u strategisch advies voor de korte termijn, of een interim leiderschapsrol voor de langere termijn?`
              },
              chips: ["Strategisch Advies", "Interim Leiderschap"]
            },
            {
              id: 'experience_po',
              keywords: ['product owner', 'product manager', 'sunrock', 'rabobank', 'figma', 'jira', 'pspo'],
              response: {
                text: `Coen heeft uitgebreide ervaring als Product Owner en IT Product Manager. Bij <strong>Sunrock</strong> leidde hij de volledige ontwikkeling van een klantenportaal en een digitale ontwerptool voor PV-systemen. Hij is bedreven in het beheren van backlogs in Jira, ontwerpen in Figma, en is een gecertificeerd Professional Scrum Product Owner (PSPO II).`
              },
              chips: ["Wat zijn zijn technische skills?"]
            },
            {
              id: 'experience_scrum',
              keywords: ['scrum master', 'agile coach', 'psm', 'scrum', 'agile mindset', 'abn amro'],
              response: {
                text: `Jazeker, Coen heeft directe ervaring als <strong>Agile Coach en Scrum Master bij ABN AMRO</strong>. Hij coachte drie teams (25 leden) naar een volledig agile werkwijze en was verantwoordelijk voor het Scrum-framework.`
              },
              chips: ["En als Product Owner?"]
            },
            {
              id: 'experience_elipslife',
              keywords: ['elipslife', 'interim leiderschap', 'erp', 'verzekering'],
              response: {
                text: `Bij elipsLife was Coen interim <strong>Head of Business Services</strong>. Hij gaf leiding aan een team van zeven en was projectmanager voor een grote internationale ERP-implementatie die succesvol live is gegaan. Dit project verenigde teams uit vier landen en migreerde de gehele Nederlandse verzekeringsportefeuille.`
              },
              chips: ["En zijn werk bij Kramp?"]
            },
            {
              id: 'experience_kramp',
              keywords: ['kramp', 'pmo', 'transformatie'],
              response: {
                text: `Bij Kramp was Coen een <strong>Transformation Management Officer (PMO)</strong> voor een groot Target Operating Model-programma. Hij was verantwoordelijk voor projectmanagement, het volgen van de voortgang van 15 'workstreams' en het implementeren van nieuwe, efficiÃ«ntere werkwijzen in heel Europa.`
              },
              chips: ["Welke andere ervaring heeft hij?"]
            },
            {
              id: 'contact',
              keywords: ['contact', 'gesprek', 'kennismaking', 'plannen', 'afspraak'],
              response: {
                text: `De beste volgende stap is een korte kennismaking met Coen. U kunt dat doen door op de onderstaande link te klikken: <br><a href="https://calendly.com/coenzweers-solix/introduction" target="_blank" rel="noopener noreferrer" class="calendly-link" aria-label="Plan een gesprek met Coen via Calendly">Plan een gesprek</a><br> Of u kunt direct mailen via <a href="mailto:coenzweers@solix.cc" class="contact-email">coenzweers@solix.cc</a>.`
              },
              chips: ["Stuur e-mail"]
            },
            {
              id: 'thanks',
              keywords: ['bedankt', 'dank', 'ok', 'geweldig'],
              response: {
                text: "Graag gedaan! Als u nog andere vragen heeft, stel ze gerust. Anders is het inplannen van een gesprek de beste manier om verder te praten."
              },
              chips: ["Diensten", "Product Owner ervaring"]
            }
          ],
          fallback: {
            generic: {
              text: `Het spijt me, ik heb geen antwoord op die vraag. Overweeg <a href="https://calendly.com/coenzweers-solix/introduction" target="_blank" rel="noopener noreferrer" class="calendly-link" aria-label="Plan een gesprek met Coen via Calendly">een gesprek in te plannen</a> om direct met Coen te spreken of u kunt hem <a href="mailto:coenzweers@solix.cc" class="contact-email">per e-mail</a> bereiken.`
            },
            topicRedirects: [
              { topics: ['dienst', 'aanbod', 'helpen'], intentId: 'services_overview' },
              { topics: ['ervaring', 'werk', 'historie', 'project', 'case', 'cv'], intentId: 'experience_elipslife' },
              { topics: ['scrum', 'agile'], intentId: 'experience_scrum' },
              { topics: ['contact', 'gesprek', 'afspraak'], intentId: 'contact' }
            ]
          }
        }
      };

      const chatMessages = document.getElementById('chat-messages');
      const chatTitle = document.getElementById('chat-title');
      const userInput = document.getElementById('user-input');
      const chatInputForm = document.getElementById('chat-input-form');

      let currentLanguage = navigator.language.startsWith('nl') ? 'nl' : 'en';

      function escapeHTML(text) {
        return text.replace(/[&<>"']/g, function(m) {
          return {'&':'&amp;', '<':'&lt;', '>':'&gt;', '"':'&quot;', "'": '&#39;'}[m];
        });
      }

      function setLanguage(lang) {
        currentLanguage = lang;
        const T = translations[currentLanguage];
        chatTitle.textContent = T.title;
        userInput.placeholder = T.placeholder;
        chatMessages.innerHTML = '';
        appendMessage('bot', T.welcome);
      }

      function getBotResponse(userText) {
        const textLower = userText.toLowerCase();
        const T = translations[currentLanguage];
        for (const intent of T.intents) {
          if (intent.keywords.some(k => textLower.includes(k))) {
            return intent.response;
          }
        }
        for (const redirect of T.fallback.topicRedirects) {
          if (redirect.topics.some(t => textLower.includes(t))) {
            const matched = T.intents.find(i => i.id === redirect.intentId);
            if (matched) return matched.response;
          }
        }
        return T.fallback.generic;
      }

      function appendMessage(sender, response) {
        const { text, chips = [], htmlContent = null, langSwitcher = null } = response;
        const wrapper = document.createElement('div');
        wrapper.className = `message-wrapper ${sender}-message-wrapper`;
        let avatar = sender === 'bot' ? `<div class="bot-avatar" aria-hidden="true">S</div>` : '';
        const container = document.createElement('div');
        container.className = 'message-container';

        if (text) {
          const content = document.createElement('div');
          content.className = `message-content ${sender}-message-content`;
          content.innerHTML = text;
          container.appendChild(content);
        }

        if (htmlContent) {
          const embed = document.createElement('div');
          embed.className = 'calendly-embed-container';
          embed.innerHTML = htmlContent;
          container.appendChild(embed);
        }

        if (chips.length) {
          const chipsContainer = document.createElement('div');
          chipsContainer.className = 'suggestion-chips';
          chips.forEach(c => {
            const chip = document.createElement('button');
            chip.type = 'button';
            chip.className = 'chip';
            chip.textContent = c;
            chip.onclick = () => {
              disableChips(chipsContainer);
              appendMessage('user', { text: escapeHTML(c) });
              // Bij "Send Email" / "Stuur e-mail" direct e-mail link tonen
              if (c.toLowerCase().includes('email') || c.toLowerCase().includes('e-mail') || c.toLowerCase().includes('stuur e-mail')) {
                appendMessage('bot', {
                  text: currentLanguage === 'nl' ?
                    `U kunt Coen direct e-mailen via <a href="mailto:coenzweers@solix.cc" class="contact-email">coenzweers@solix.cc</a>.` :
                    `You can email Coen directly at <a href="mailto:coenzweers@solix.cc" class="contact-email">coenzweers@solix.cc</a>.`
                });
              }
              // Bij "Book a Call" knop direct link tonen
              else if (c.toLowerCase().includes('book a call') || c.toLowerCase().includes('boek een gesprek') || c.toLowerCase().includes('plan een gesprek')) {
                appendMessage('bot', {
                  text: currentLanguage === 'nl' ?
                    `Klik op de volgende link om een gesprek in te plannen: <a href="https://calendly.com/coenzweers-solix/introduction" target="_blank" rel="noopener noreferrer" class="calendly-link" aria-label="Plan een gesprek met Coen via Calendly">Plan een gesprek</a>.` :
                    `Click the link to book a call: <a href="https://calendly.com/coenzweers-solix/introduction" target="_blank" rel="noopener noreferrer" class="calendly-link" aria-label="Book a call with Coen on Calendly">Book a Call</a>.`
                });
              } else {
                handleBotResponse(c);
              }
            };
            chipsContainer.appendChild(chip);
          });
          container.appendChild(chipsContainer);
        }

        if (langSwitcher) {
          const langDiv = document.createElement('div');
          langDiv.className = 'language-switcher';
          const langChip = document.createElement('button');
          langChip.className = 'chip lang-chip';
          langChip.type = 'button';
          langChip.textContent = langSwitcher.text;
          langChip.onclick = () => setLanguage(langSwitcher.lang);
          langDiv.appendChild(langChip);
          container.appendChild(langDiv);
        }

        const time = document.createElement('time');
        time.className = 'message-time';
        time.setAttribute('datetime', new Date().toISOString());
        time.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        container.appendChild(time);

        wrapper.innerHTML = avatar;
        wrapper.appendChild(container);
        chatMessages.appendChild(wrapper);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      function disableChips(container) {
        container.querySelectorAll('.chip').forEach(c => {
          c.disabled = true;
          c.style.cursor = 'default';
          c.style.opacity = '0.6';
        });
      }

      function showTypingIndicator() {
        const typingHtml = `<div class="message-wrapper bot-message-wrapper" id="typing-indicator" aria-live="polite" aria-atomic="true">
          <div class="bot-avatar" aria-hidden="true">S</div>
          <div class="message-container">
            <div class="message-content bot-message-content" aria-label="Assistant is typing">
              <div class="typing-indicator"><span></span><span></span><span></span></div>
            </div>
          </div>
        </div>`;
        chatMessages.insertAdjacentHTML('beforeend', typingHtml);
        chatMessages.scrollTop = chatMessages.scrollHeight;
      }

      function removeTypingIndicator() {
        const indicator = document.getElementById('typing-indicator');
        if (indicator) indicator.remove();
      }

      function handleBotResponse(userText) {
        showTypingIndicator();
        setTimeout(() => {
          removeTypingIndicator();
          const response = getBotResponse(userText);
          appendMessage('bot', response);
        }, 1200);
      }

      chatInputForm.onsubmit = e => {
        e.preventDefault();
        const val = userInput.value.trim();
        if (!val) return;
        appendMessage('user', { text: escapeHTML(val) });
        userInput.value = '';
        handleBotResponse(val);
      };

      setLanguage(currentLanguage);
      window.onload = () => userInput.focus();
    })();
  </script>
</body>
</html>
