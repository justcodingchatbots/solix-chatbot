<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://assets.calendly.com/assets/external/widget.css" rel="stylesheet">
    <title>Solix.cc | AI Assistant</title>
    <style>
        :root {
            --primary-color: #ffd100;
            --secondary-color: #f1f3f4;
            --bot-message-bg: #ffffff;
            --user-message-bg: #fff8e1;
            --font-color: #172b4d;
            --font-color-light: #6b778c;
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            --border-radius-lg: 16px;
            --border-radius-sm: 8px;
        }

        html, body {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; font-family: var(--font-family); background-color: transparent;
        }

        #chatbot-container {
            width: 100%; height: 100%; background-color: var(--secondary-color);
            display: flex; flex-direction: column; overflow: hidden;
        }
        
        @media (min-width: 768px) {
            body {
                display: flex; justify-content: center; align-items: center;
                padding: 20px; box-sizing: border-box;
            }
            #chatbot-container {
                max-width: 480px; height: 85%; max-height: 750px;
                border-radius: var(--border-radius-lg);
                box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            }
        }

        #chat-header {
            background-color: var(--primary-color); color: var(--font-color);
            padding: 16px 20px; display: flex; align-items: center;
            flex-shrink: 0; gap: 12px;
        }

        #header-avatar {
            width: 40px; height: 40px; border-radius: 50%;
            background-color: rgba(0, 0, 0, 0.1); display: flex;
            align-items: center; justify-content: center;
            font-weight: bold; font-size: 20px;
        }

        #chat-header h3 {
            margin: 0; font-size: 18px; font-weight: 600;
        }

        #chat-messages {
            flex-grow: 1; padding: 20px; overflow-y: auto; min-height: 0;
        }
        
        .message-wrapper {
            display: flex; margin-bottom: 20px; animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message-wrapper { justify-content: flex-start; }
        .user-message-wrapper { justify-content: flex-end; }

        .bot-avatar {
            width: 32px; height: 32px; border-radius: 50%;
            background-color: var(--primary-color); color: var(--font-color);
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; font-size: 16px; margin-right: 12px; flex-shrink: 0;
        }
        
        .message-content {
            padding: 12px 16px; border-radius: var(--border-radius-lg);
            line-height: 1.5; word-wrap: break-word; max-width: 100%;
        }

        .calendly-embed-container {
            margin-top: 10px; border-radius: var(--border-radius-lg); overflow: hidden;
        }

        .message-container {
            display: flex; flex-direction: column; max-width: calc(100% - 44px);
        }
        
        .bot-message-wrapper .message-container { align-items: flex-start; }
        .user-message-wrapper .message-container { align-items: flex-end; max-width: 85%; }

        .bot-message-content {
            background-color: var(--bot-message-bg); color: var(--font-color);
            border-bottom-left-radius: var(--border-radius-sm);
        }

        .user-message-content {
            background-color: var(--user-message-bg); color: var(--font-color);
            border-bottom-right-radius: var(--border-radius-sm);
        }

        .message-time {
            font-size: 11px; color: var(--font-color-light);
            margin-top: 6px; padding: 0 5px;
        }

        .typing-indicator span {
            height: 8px; width: 8px; margin: 0 2px;
            background-color: #b0b8c8; border-radius: 50%;
            display: inline-block; animation: bounce 1.4s infinite ease-in-out both;
        }
        .typing-indicator span:nth-child(1) { animation-delay: -0.32s; }
        .typing-indicator span:nth-child(2) { animation-delay: -0.16s; }
        @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1.0); } }

        #chat-input-container {
            border-top: 1px solid #dde1e6; padding: 15px 20px;
            background-color: white; flex-shrink: 0;
        }

        #chat-input-form { display: flex; align-items: center; }
        
        #user-input {
            flex-grow: 1; border: 1px solid #ccc; border-radius: 20px;
            padding: 10px 18px; font-size: 14px; margin-right: 10px;
            outline: none; transition: border-color 0.2s;
        }
        #user-input:focus { border-color: var(--primary-color); }

        #send-btn {
            background-color: var(--primary-color); color: var(--font-color);
            border: none; border-radius: 50%; width: 40px; height: 40px;
            font-size: 18px; cursor: pointer; display: flex;
            align-items: center; justify-content: center;
            transition: background-color 0.2s; flex-shrink: 0;
        }
        #send-btn:hover { background-color: #e6b800; }

        .suggestion-chips, .language-switcher {
            display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px;
        }
        .chip {
            background-color: #fff8e1; color: var(--font-color); padding: 6px 12px;
            border-radius: 16px; font-size: 13px; cursor: pointer;
            border: 1px solid transparent; transition: all 0.2s;
        }
        .chip:hover { border-color: var(--primary-color); background-color: #d1e3ff; }
        
        .lang-chip {
             background-color: transparent; color: var(--font-color-light); font-size: 12px;
             border: 1px solid #dde1e6; padding: 4px 10px;
        }
        .lang-chip:hover { background-color: #e9ecef; border-color: #b0b8c8;}

    </style>
</head>
<body>

    <div id="chatbot-container">
        <div id="chat-header">
            <div id="header-avatar">S</div>
            <h3 id="chat-title">Solix AI Assistant</h3>
        </div>
        <div id="chat-messages"></div>
        <div id="chat-input-container">
            <form id="chat-input-form">
                <input type="text" id="user-input" autocomplete="off">
                <button type="submit" id="send-btn">&#10148;</button>
            </form>
        </div>
    </div>

    <script type="text/javascript" src="https://assets.calendly.com/assets/external/widget.js" async></script>
    <script>
        window.addEventListener('load', () => {
            // --- DOM Elements ---
            const chatInputForm = document.getElementById('chat-input-form');
            const userInput = document.getElementById('user-input');
            const chatMessages = document.getElementById('chat-messages');
            const chatTitle = document.getElementById('chat-title');

            // --- Language & Content ---
            let currentLanguage = navigator.language.startsWith('nl') ? 'nl' : 'en';

            const translations = {
                en: {
                    title: "Solix AI Assistant",
                    placeholder: "Ask me anything about Solix.cc...",
                    welcome: {
                        text: `Hello! I'm the Solix AI Assistant, representing Coen Zweers. It is currently 2:43 PM in Amsterdam. How can I help you today?`,
                        chips: ["What services does Solix offer?", "Tell me about Coen's experience", "Book an introduction"],
                        langSwitcher: { lang: 'nl', text: 'ðŸ‡³ðŸ‡± Schakel over naar Nederlands' }
                    },
                    intents: [
                        { keywords: ['contact', 'email', 'book', 'call', 'available', 'touch'], response: { text: `Of course. The most effective way to connect is to schedule an introduction call directly in my calendar below.`, htmlContent: `<div class="calendly-inline-widget" data-url="https://calendly.com/coenzweers-solix/introduction" style="min-width:320px;height:700px;"></div>`, chips: ["What are your services?", "Thanks!"] }},
                        { keywords: ['service', 'offer', 'what do you do', 'help with'], response: { text: `Solix provides flexible support in four key areas:<br>ðŸš€ Strategic Consultancy Projects<br>ðŸ‘” Interim Leadership Roles<br>ðŸ”„ Change Management<br>âš¡ Agile Transformation Workshops<br><br>Which area interests you the most?`, chips: ["Strategy", "Interim Leadership", "Change Management", "Workshops"] }},
                        { keywords: ['experience', 'background', 'cv', 'resume', 'worked'], response: { text: `Coen has a rich background as a seasoned IT specialist. His experience spans high-level strategy and hands-on execution. To give you the most relevant info, what are you most interested in?`, chips: ["Leadership Roles", "Product Management", "Consulting (Accenture)"] }},
                        { keywords: ['thanks', 'thank you', 'bye', 'ok'], response: { text: "You're welcome! Is there anything else I can help with?", chips: ["Services", "Contact"] }}
                        // Add other English intents here
                    ]
                },
                nl: {
                    title: "Solix AI Assistent",
                    placeholder: "Stel een vraag over Solix.cc...",
                    welcome: {
                        text: `Hallo! Ik ben de Solix AI Assistent, de digitale vertegenwoordiger van Coen Zweers. Het is momenteel 14:43 in Amsterdam. Hoe kan ik u helpen?`,
                        chips: ["Welke diensten biedt Solix?", "Vertel over Coen's ervaring", "Plan een kennismaking"],
                        langSwitcher: { lang: 'en', text: 'ðŸ‡¬ðŸ‡§ Switch to English' }
                    },
                    intents: [
                        { keywords: ['contact', 'e-mail', 'mail', 'boek', 'boeken', 'afspraak', 'plannen', 'beschikbaar'], response: { text: `Natuurlijk. De meest effectieve manier om een gesprek te starten is door direct een kennismakingsgesprek in te plannen in de onderstaande agenda.`, htmlContent: `<div class="calendly-inline-widget" data-url="https://calendly.com/coenzweers-solix/introduction" style="min-width:320px;height:700px;"></div>`, chips: ["Wat zijn de diensten?", "Bedankt!"] }},
                        { keywords: ['diensten', 'aanbod', 'wat doe je', 'helpen'], response: { text: `Solix biedt flexibele ondersteuning op vier belangrijke gebieden:<br>ðŸš€ Strategische Consultancy Projecten<br>ðŸ‘” Interim Leiderschapsrollen<br>ðŸ”„ Verandermanagement<br>âš¡ Agile Transformatie Workshops<br><br>In welk gebied bent u het meest geÃ¯nteresseerd?`, chips: ["Strategie", "Interim Leiderschap", "Verandermanagement", "Workshops"] }},
                        { keywords: ['ervaring', 'achtergrond', 'cv'], response: { text: `Coen heeft een brede achtergrond als ervaren IT-specialist, van strategie tot uitvoering. Om u de meest relevante informatie te geven, waar bent u specifiek in geÃ¯nteresseerd?`, chips: ["Leiderschapsrollen", "Product Management", "Consulting (Accenture)"] }},
                        { keywords: ['bedankt', 'dank', 'ok', 'doei'], response: { text: "Graag gedaan! Kan ik u nog ergens anders mee helpen?", chips: ["Diensten", "Contact"] }}
                         // Add other Dutch intents here
                    ]
                }
            };

            function setLanguage(lang) {
                currentLanguage = lang;
                const T = translations[lang];
                chatTitle.textContent = T.title;
                userInput.placeholder = T.placeholder;
                chatMessages.innerHTML = '';
                appendMessage('bot', T.welcome);
            }

            chatInputForm.addEventListener('submit', (e) => {
                e.preventDefault();
                const messageText = userInput.value.trim();
                if (messageText) {
                    appendMessage('user', { text: messageText });
                    userInput.value = '';
                    handleBotResponse(messageText);
                }
            });

            function handleBotResponse(userText) {
                showTypingIndicator();
                setTimeout(() => {
                    removeTypingIndicator();
                    const botResponse = getBotResponse(userText);
                    appendMessage('bot', botResponse);
                }, 1200);
            }

            function appendMessage(sender, response) {
                const { text, chips = [], htmlContent = null, langSwitcher = null } = response;
                const messageWrapper = document.createElement('div');
                messageWrapper.className = `message-wrapper ${sender}-message-wrapper`;
                let avatarHtml = '';
                if (sender === 'bot') {
                    avatarHtml = '<div class="bot-avatar">S</div>';
                }
                const messageContainer = document.createElement('div');
                messageContainer.className = 'message-container';
                if (text) {
                    const messageContent = document.createElement('div');
                    messageContent.className = `message-content ${sender}-message-content`;
                    messageContent.innerHTML = text;
                    messageContainer.appendChild(messageContent);
                }
                if (htmlContent) {
                    const embedContainer = document.createElement('div');
                    embedContainer.className = 'calendly-embed-container';
                    embedContainer.innerHTML = htmlContent;
                    messageContainer.appendChild(embedContainer);
                }
                if (chips.length > 0) {
                    const chipsContainer = document.createElement('div');
                    chipsContainer.className = 'suggestion-chips';
                    chips.forEach(chipText => {
                        const chip = document.createElement('div');
                        chip.className = 'chip';
                        chip.textContent = chipText;
                        chip.onclick = () => {
                            chipsContainer.querySelectorAll('.chip').forEach(c => c.style.pointerEvents = 'none');
                            chip.style.backgroundColor = 'var(--primary-color)';
                            chip.style.color = 'var(--font-color)';
                            appendMessage('user', { text: chipText });
                            handleBotResponse(chipText);
                        };
                        chipsContainer.appendChild(chip);
                    });
                    messageContainer.appendChild(chipsContainer);
                }
                 if (langSwitcher) {
                    const langContainer = document.createElement('div');
                    langContainer.className = 'language-switcher';
                    const langChip = document.createElement('div');
                    langChip.className = 'chip lang-chip';
                    langChip.textContent = langSwitcher.text;
                    langChip.onclick = () => setLanguage(langSwitcher.lang);
                    langContainer.appendChild(langChip);
                    messageContainer.appendChild(langContainer);
                }
                const messageTime = document.createElement('div');
                messageTime.className = 'message-time';
                messageTime.textContent = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                messageContainer.appendChild(messageTime);
                messageWrapper.innerHTML = avatarHtml;
                messageWrapper.appendChild(messageContainer);
                chatMessages.appendChild(messageWrapper);
                scrollToBottom();
            }

            function showTypingIndicator() {
                const indicatorHtml = `<div class="message-wrapper bot-message-wrapper" id="typing-indicator"><div class="bot-avatar">S</div><div class="message-container"><div class="message-content bot-message-content"><div class="typing-indicator"><span></span><span></span><span></span></div></div></div></div>`;
                chatMessages.insertAdjacentHTML('beforeend', indicatorHtml);
                scrollToBottom();
            }

            function removeTypingIndicator() {
                const indicator = document.getElementById('typing-indicator');
                if (indicator) indicator.remove();
            }

            function scrollToBottom() {
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            function getBotResponse(userText) {
                const text = userText.toLowerCase();
                const T = translations[currentLanguage];
                const intents = T.intents;
                
                // Fallback responses must also be translated
                const fallbackResponse = {
                    text: currentLanguage === 'nl' 
                        ? "Mijn excuses, dat begrijp ik niet. Ik kan het beste helpen met vragen over diensten, ervaring en contactmogelijkheden."
                        : "I'm sorry, I don't understand that. I'm best at answering questions about services, experience, and how to get in touch.",
                    chips: currentLanguage === 'nl'
                        ? ["Diensten", "Ervaring", "Contact"]
                        : ["Services", "Experience", "Contact"]
                };

                for (const intent of intents) {
                    if (intent.keywords.some(keyword => text.includes(keyword))) {
                        return intent.response;
                    }
                }
                return fallbackResponse;
            }

            // Initialize the chat in the detected or default language
            setLanguage(currentLanguage);
        });
    </script>
</body>
</html>
